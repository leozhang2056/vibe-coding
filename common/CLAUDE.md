# CLAUDE.md - Claude 编程约束

> Claude 模型使用指南和编程约束

## Claude 核心能力

Claude 是 Anthropic 开发的 AI 助手，擅长：
- 代码生成和审查
- 长文本理解
- 多模态输入（文本、图片、文档）
- 复杂推理和问题解决

---

## 与 Claude 协作的最佳实践

### 1. 提示词结构

#### 清晰的角色定义

```
✅ 好的提示：
"""
你是一位经验丰富的 Python 开发者，专注于 Web 后端开发。
请遵循以下原则：
1. 使用 Python Flask 框架
2. 遵循 PEP 8 编码规范
3. 确保 API 符合 RESTful 设计
"""
```

#### 上下文提供

```
✅ 提供项目背景：
"""
这是一个电商网站的后端 API，使用 Python Flask。
现有代码结构为：
- models/ (数据模型)
- services/ (业务逻辑)
- api/ (API 路由)

请基于这个结构添加用户注册功能。
"""
```

---

### 2. 代码生成约束

#### 遵循编程规范

```
请确保代码：
1. 遵循 SOLID 原则
2. 函数短小，职责单一
3. 使用类型提示
4. 包含文档字符串
5. 有适当的错误处理
```

#### 安全考虑

```
注意安全性：
- 输入验证
- SQL 注入防护
- 密码加密（使用 bcrypt）
- 敏感数据不记录日志
```

---

### 3. 代码审查模式

#### 审查标准

```
请审查以下代码：
1. 代码质量：可读性、可维护性
2. 性能：是否有性能瓶颈
3. 安全：是否存在安全漏洞
4. 测试：是否易于测试
5. 规范：是否符合项目编码标准
```

---

## Claude 特定技巧

### 利用长上下文

Claude 支持大上下文窗口，可以：

```
# ✅ 提供完整文件内容
请阅读整个 utils.py 文件，然后重构它。

# ✅ 多文件协作
这里有 models/user.py 和 services/auth_service.py，
请在两个文件中添加用户注册功能。
```

---

### 代码重构

```
# ✅ 渐进式重构
请分三步重构这段代码：
1. 提取函数
2. 简化逻辑
3. 添加类型提示

# ✅ 保持兼容性
重构时保持 API 接口不变，
只改变内部实现。
```

---

### 调试和问题解决

```
# ✅ 系统化调试
这段代码有 bug：
[粘贴代码]

请：
1. 分析可能的问题
2. 提供修复建议
3. 解释修复原理

# ✅ 边界情况
考虑以下边界情况：
- 空输入
- 超长输入
- 特殊字符
- 并发访问
```

---

## 多模态使用

### 图片输入

```
[上传 UI 截图]

这是应用界面，请分析：
1. UI 结构
2. 改进建议
3. 实现 HTML/CSS
```

### 文档分析

```
[上传 API 文档]

基于这个 API 文档，
生成对应的 Python SDK 函数。
```

---

## 与其他 AI 工具的对比

| 特性 | Claude | ChatGPT | Cursor |
|------|--------|---------|-------|
| 代码生成 | ⭐⭐️⭐️⭐️ | ⭐⭐️⭐️⭐️ | ⭐⭐️⭐️⭐️ |
| 上下文窗口 | ⭐⭐️⭐️⭐️⭐️ | ⭐⭐️⭐️ | ⭐⭐️⭐️ |
| 长文本处理 | ⭐⭐️⭐️⭐️⭐️ | ⭐️⭐️⭐ | ⭐⭐️⭐ |
| 多模态输入 | ⭐⭐️⭐️⭐️ | ⭐⭐️⭐️ | ⭐⭐️⭐️ |
| IDE 集成 | ⭐⭐️ | ⭐⭐️⭐️ | ⭐⭐️⭐️⭐️ |

---

## 常见场景

### 场景 1：从头创建项目

```
创建一个完整的 Flask REST API：
- 用户注册/登录
- CRUD 操作
- JWT 认证
- 单元测试

请遵循 Clean Architecture 原则。
```

### 场景 2：代码审查

```
请审查这段 Python 代码：
[粘贴代码]

重点关注：
- 代码规范
- 性能
- 安全
- 可测试性
```

### 场景 3：重构

```
重构以下代码以提升可读性：
[粘贴代码]

要求：
1. 提取复杂函数
2. 添加类型提示
3. 改进命名
4. 添加文档字符串
```

---

## 质量保障

### 代码质量检查清单

在接收 Claude 生成的代码时：

- [ ] 代码可读性良好
- [ ] 遵循项目编码规范
- [ ] 包含适当的错误处理
- [ ] 有单元测试
- [ ] 通过安全审查
- [ ] 性能满足要求

---

## 安全提醒

### 永远不要这样做

```
❌ 不要：
- 在代码中硬编码密钥
- 生成不安全的代码
- 忽略输入验证
- 使用已弃用的库

✅ 要：
- 使用环境变量
- 遵循安全最佳实践
- 验证所有输入
- 使用维护中的库
```

---

## AI 编码检查清单

- [ ] 提示词包含角色定义
- [ ] 提供足够的上下文
- [ ] 明确指定编码规范
- [ ] 考虑安全性
- [ ] 要求包含测试
- [ ] 检查代码质量
- [ ] 验证功能完整性
